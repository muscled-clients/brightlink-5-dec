{% assign product_specification = product.metafields.custom.specification_table2.value %}
{% assign product_features = product.metafields.custom.accordion_features2.value %}

{% if product_specification == blank and product_features == blank and product.metafields.custom.section_video.value == blank and product.metafields.custom.section_custom_faq_dropdown_list == blank and product.metafields.custom.accordion_downloads.value == blank %}
  <style>
    #shopify-section-{{ section.id }} {
      display: none;
    }
  </style>
{% endif %}

<style>

/* Inactive tab button SVG */
#shopify-section-{{ section.id }} .tab-button:not(.active) svg {
  fill: #A0AEC0; /* Gray color for inactive SVG */
}
  /* Active tab button SVG */
#shopify-section-{{ section.id }} .tab-button.active svg {
  fill: #0A84FF; /* Blue color for active SVG */
}
 
  #shopify-section-{{ section.id }} {
    background: #0a1628;
    font-family: 'Montserrat', sans-serif;
        padding: 80px 30px;
  }

  #shopify-section-{{ section.id }} a {
    color: #4190D2;
    text-decoration: none;
  }

  /* Tabs Container */
  #shopify-section-{{ section.id }} .tabs-container {
    display: flex;
{% comment %} width: 1280px; {% endcomment %}
padding: 12px 28px 28px 28px;
flex-direction: column;
align-items: flex-start;
gap: 60px;
border-radius: 24px;
border: 1px solid rgba(255, 255, 255, 0.10);
background: rgba(255, 255, 255, 0.01);
box-shadow: 0 0 80px 0 rgba(10, 132, 255, 0.20);
  }

  #shopify-section-{{ section.id }} .tabs-wrapper {
   display: flex;
align-items: center;
gap: 20px;
align-self: stretch;
  }

  #shopify-section-{{ section.id }} .tab-button {
    color: #FFF;
text-align: center;
font-family: Inter;
font-size: 16px;
font-style: normal;
font-weight: 500;
line-height: normal;
display: flex;
height: 56px;
padding: 0 32px;
justify-content: center;
align-items: center;
gap: 12px;
flex: 1 0 0;
  }

  #shopify-section-{{ section.id }} .tab-button:hover {
    border-color: #4190D2;
  }

  #shopify-section-{{ section.id }} .tab-button.active {
   border-radius: 12px;
background: rgba(10, 132, 255, 0.15);
 color: #0A84FF;
  }

  #shopify-section-{{ section.id }} .tab-button svg {
    width: 16.502px;
height: 16.002px;
fill: #FFFFFF;
  }
 

  /* Tab Content */
  #shopify-section-{{ section.id }} .tab-content {
    display: none;
    width: 100%;
  }

  #shopify-section-{{ section.id }} .tab-content.active {
    display: block;
    width: 100%;
  }

  /* Section Title */
  #shopify-section-{{ section.id }} .section-title {

   {% comment %} width: 285px; {% endcomment %}
    margin-top:24px;
height: 36px;
color: #0A84FF;
font-family: Inter;
font-size: 30px;
font-style: normal;
font-weight: 700;
line-height: 36px; /* 120% */
display: flex;
align-items: center;
gap: 16px;
  }

  #shopify-section-{{ section.id }} .section-title svg {

   display: flex;
width: 48px;
height: 48px;
padding: 10px 12.75px;
justify-content: center;
align-items: center;
border-radius: 8px;
border: 0 solid #E5E7EB;
background: rgba(0, 102, 204, 0.20);
  }

  /* Features Section */
  #shopify-section-{{ section.id }} .features-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    align-items: start;
  }

  #shopify-section-{{ section.id }} .features-list {
    display: flex;
flex-direction: column;
align-items: flex-start;
gap: 16px;
align-self: stretch;
    {% comment %} list-style: none;
    padding: 0;
    margin: 0; {% endcomment %}
  }

  #shopify-section-{{ section.id }} .features-list li {
   display: flex;
align-items: center;
gap: 16px;
color: #FFF;
font-family: Inter;
font-size: 18px;
font-style: normal;
font-weight: 400;
line-height: 28px; /* 155.556% */
  }

  #shopify-section-{{ section.id }} .features-list li svg {

 display: flex;
width: 32px;
height: 32px;
padding: 4px 9px;
justify-content: center;
align-items: center;
border-radius: 8px;
border: 0 solid #E5E7EB;
background: rgba(10, 132, 255, 0.20);
  }

  #shopify-section-{{ section.id }} .features-image {
    border-radius: 8px;
    overflow: hidden;
    border-radius: 16px;
    border: 2px solid #0A84FF;
  }

  #shopify-section-{{ section.id }} .features-image img {
    width: 100%;
    
    height: auto;
    display: block;
  }

  #shopify-section-{{ section.id }} .sub-section-title {
    color: #4190D2;
    font-size: 18px;
    font-weight: 600;
    margin: 40px 0 20px 0;
  }

  /* Specifications Table */
  #shopify-section-{{ section.id }} .spec-table {
    width: 100%;
    border-collapse: collapse;
  }

  #shopify-section-{{ section.id }} .spec-table td {
    padding: 16px 20px;
    border-bottom: 1px solid #1e2d44;
    color: #b0b8c4;
    font-size: 14px;
  }

  #shopify-section-{{ section.id }} .spec-table td:first-child {
    color: #fff;
    font-weight: 500;
    width: 40%;
  }

  #shopify-section-{{ section.id }} .spec-table-title {
    color: #fff;
    font-size: 16px;
    font-weight: 600;
    padding: 20px;
    background: #0d1c30;
    border-bottom: 1px solid #1e2d44;
  }

  /* Video Section */
  #shopify-section-{{ section.id }} .video-wrapper {
    position: relative;
    width: 100%;
    border-radius: 12px;
    overflow: hidden;
  }

  #shopify-section-{{ section.id }} .video-wrapper img {
    width: 100%;
    height: auto;
    display: block;
    max-width: 1224px;
max-height: 688.5px;
  }

  #shopify-section-{{ section.id }} .video-play-btn {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80px;
    height: 80px;
    background: rgba(255,255,255,0.9);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.3s ease;
  }

  #shopify-section-{{ section.id }} .video-play-btn:hover {
    transform: translate(-50%, -50%) scale(1.1);
  }

  #shopify-section-{{ section.id }} .video-play-btn svg {
    width: 30px;
    height: 30px;
    margin-left: 5px;
  }

  /* Downloads Section */
  #shopify-section-{{ section.id }} .tab-content .downloads-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
    width: 100%;
  }

  #shopify-section-{{ section.id }} .download-item {
    display: flex;
height: 150px;
padding: 0 40px;
justify-content: space-between;
align-items: center;
align-self: stretch;
border-radius: 16px;
border: 1px solid rgba(255, 255, 255, 0.10);
background: rgba(255, 255, 255, 0.05);
box-shadow: 0 0 40px 0 rgba(10, 132, 255, 0.15);
  }

  #shopify-section-{{ section.id }} .download-item-name {
    color: #FFF;
font-family: Inter;
font-size: 24px;
font-style: normal;
font-weight: 600;
line-height: 32px; /* 133.333% */
  }

  #shopify-section-{{ section.id }} .download-btn {
    display: flex;
width: 238px;
height: 56px;
justify-content: center;
align-items: center;
gap: 12px;
border-radius: 8px;
border: 0 solid #E5E7EB;
background: #0A84FF;
box-shadow: 0 0 30px 0 rgba(10, 132, 255, 0.40);
color: #FFF;
text-align: center;
font-family: Inter;
font-size: 16px;
font-style: normal;
font-weight: 600;
line-height: normal;
  }

  #shopify-section-{{ section.id }} .download-btn.svg{
    width: 16px;
height: 16px;
fill: #FFF;
  
  }

  #shopify-section-{{ section.id }} .download-btn:hover {
    opacity: 0.85;
  }

  /* What's Included Section */
  #shopify-section-{{ section.id }} .whats-included-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    align-items: start;
  }

  /* Responsive */
  @media screen and (max-width: 768px) {
    #shopify-section-{{ section.id }} .tabs-wrapper {
      overflow-x: auto;
      flex-wrap: nowrap;
      padding-bottom: 10px;
    }

    #shopify-section-{{ section.id }} .tab-button {
      white-space: nowrap;
      padding: 10px 18px;
      font-size: 12px;
    }

    #shopify-section-{{ section.id }} .features-content,
    #shopify-section-{{ section.id }} .whats-included-content {
      grid-template-columns: 1fr;
    }

    #shopify-section-{{ section.id }} .section-title {

      font-size: 20px;
    }

    #shopify-section-{{ section.id }} .download-item {
      flex-direction: column;
      align-items: flex-start;
      gap: 15px;
    }

    #shopify-section-{{ section.id }} .download-btn {
      width: 100%;
      justify-content: center;
    }
  }
</style>

<section class="tabs-container" id="accordion-tabs-{{ section.id }}">
  <!-- Tab Buttons -->
  <div class="tabs-wrapper">
    {% for block in section.blocks %}
      {% case block.type %}
        {% when 'feaures' %}
          {% if product_features != blank %}
            <button class="tab-button {% if forloop.first %}active{% endif %}" data-tab="features-{{ block.id }}">
              <svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none">
  <path d="M9.14864 0.5625C8.98301 0.21875 8.63301 0 8.24864 0C7.86426 0 7.51739 0.21875 7.34864 0.5625L5.33926 4.69688L0.851764 5.35938C0.476764 5.41563 0.164264 5.67812 0.0486389 6.0375C-0.0669861 6.39687 0.0267638 6.79375 0.295514 7.05937L3.55176 10.2812L2.78301 14.8344C2.72051 15.2094 2.87676 15.5906 3.18614 15.8125C3.49551 16.0344 3.90489 16.0625 4.24239 15.8844L8.25176 13.7437L12.2611 15.8844C12.5986 16.0625 13.008 16.0375 13.3174 15.8125C13.6268 15.5875 13.783 15.2094 13.7205 14.8344L12.9486 10.2812L16.2049 7.05937C16.4736 6.79375 16.5705 6.39687 16.4518 6.0375C16.333 5.67812 16.0236 5.41563 15.6486 5.35938L11.158 4.69688L9.14864 0.5625Z" fill="#FFFFFF"/>
</svg>
              {{ block.settings.title | default: 'Features' }}
            </button>
          {% endif %}

        {% when 'specification' %}
          {% if product_specification != blank %}
            <button class="tab-button" data-tab="specification-{{ block.id }}">
             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="14" viewBox="0 0 16 14" fill="none">
  <path d="M4.75273 0.196365C5.06211 0.47449 5.08711 0.946365 4.80898 1.25574L2.55898 3.75574C2.42148 3.90887 2.22773 3.99949 2.02148 4.00261C1.81523 4.00574 1.61836 3.92762 1.47148 3.78387L0.218359 2.53387C-0.0722656 2.24012 -0.0722656 1.76512 0.218359 1.47137C0.508984 1.17762 0.987109 1.17762 1.27773 1.47137L1.96836 2.16199L3.69023 0.24949C3.96836 -0.0598848 4.44023 -0.0848849 4.74961 0.19324L4.75273 0.196365ZM4.75273 5.19636C5.06211 5.47449 5.08711 5.94637 4.80898 6.25574L2.55898 8.75574C2.42148 8.90886 2.22773 8.99949 2.02148 9.00261C1.81523 9.00574 1.61836 8.92762 1.47148 8.78386L0.218359 7.53386C-0.0753906 7.24012 -0.0753906 6.76512 0.218359 6.47449C0.512109 6.18387 0.987109 6.18074 1.27773 6.47449L1.96836 7.16512L3.69023 5.25261C3.96836 4.94324 4.44023 4.91824 4.74961 5.19636H4.75273ZM6.99961 2.00262C6.99961 1.44949 7.44648 1.00262 7.99961 1.00262H14.9996C15.5527 1.00262 15.9996 1.44949 15.9996 2.00262C15.9996 2.55574 15.5527 3.00262 14.9996 3.00262H7.99961C7.44648 3.00262 6.99961 2.55574 6.99961 2.00262ZM6.99961 7.00261C6.99961 6.44949 7.44648 6.00261 7.99961 6.00261H14.9996C15.5527 6.00261 15.9996 6.44949 15.9996 7.00261C15.9996 7.55574 15.5527 8.00261 14.9996 8.00261H7.99961C7.44648 8.00261 6.99961 7.55574 6.99961 7.00261ZM4.99961 12.0026C4.99961 11.4495 5.44648 11.0026 5.99961 11.0026H14.9996C15.5527 11.0026 15.9996 11.4495 15.9996 12.0026C15.9996 12.5557 15.5527 13.0026 14.9996 13.0026H5.99961C5.44648 13.0026 4.99961 12.5557 4.99961 12.0026ZM1.49961 10.5026C1.89743 10.5026 2.27896 10.6607 2.56027 10.942C2.84157 11.2233 2.99961 11.6048 2.99961 12.0026C2.99961 12.4004 2.84157 12.782 2.56027 13.0633C2.27896 13.3446 1.89743 13.5026 1.49961 13.5026C1.10178 13.5026 0.720254 13.3446 0.438949 13.0633C0.157645 12.782 -0.000390634 12.4004 -0.000390634 12.0026C-0.000390634 11.6048 0.157645 11.2233 0.438949 10.942C0.720254 10.6607 1.10178 10.5026 1.49961 10.5026Z" fill="#A0AEC0"/>
</svg>
              </svg>
              {{ block.settings.title | default: 'Specifications' }}
            </button>
          {% endif %}

        {% when 'whats_included' %}
          {% if block.settings.content != blank or product.metafields.custom.whats_included != blank %}
            <button class="tab-button" data-tab="whats-included-{{ block.id }}">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/>
              </svg>
              {{ block.settings.title | default: "What's Included" }}
            </button>
          {% endif %}

        {% when 'video' %}
          {% if product.metafields.custom.section_video.value != blank %}
            <button class="tab-button" data-tab="video-{{ block.id }}">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="5 3 19 12 5 21 5 3"/>
              </svg>
              {{ block.settings.title | default: 'Video' }}
            </button>
          {% endif %}

        {% when 'downloads' %}
          {% if product.metafields.custom.accordion_downloads.value != blank %}
            <button class="tab-button" data-tab="downloads-{{ block.id }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="14" viewBox="0 0 18 14" fill="none">
  <path d="M13.0203 3.56094H12.8656C12.6953 3.56094 12.5641 3.42656 12.5492 3.25703C12.3953 1.43279 10.8656 0 9.00079 0C7.13671 0 5.60695 1.43283 5.45235 3.25703C5.43829 3.42657 5.30626 3.56094 5.13595 3.56094H4.98126C2.36323 3.56094 0.0812102 5.57816 0.00220936 8.19458C-0.0790415 10.9016 2.09123 13.122 4.78046 13.122H13.2195C15.9086 13.122 18.079 10.9016 17.9978 8.19458C17.9189 5.57816 15.6368 3.56094 13.0187 3.56094H13.0203ZM11.9164 8.60319L9.33738 11.2656C9.15378 11.4555 8.8491 11.4555 8.66549 11.2656L6.08647 8.60319C5.79896 8.3063 6.00912 7.80942 6.42241 7.80942H7.73882C7.82945 7.80942 7.90289 7.73598 7.90289 7.64536V4.81173C7.90289 4.30468 8.31383 3.89376 8.82086 3.89376H9.1818C9.68885 3.89376 10.0998 4.3047 10.0998 4.81173V7.64536C10.0998 7.73598 10.1732 7.80942 10.2638 7.80942H11.5802C11.9935 7.80942 12.2037 8.3063 11.9162 8.60319H11.9164Z" fill="white"/>
</svg>
              {{ block.settings.title | default: 'Download' }}
            </button>
          {% endif %}

        {% when 'faq' %}
          {% if product.metafields.custom.section_custom_faq_dropdown_list != blank %}
            <button class="tab-button" data-tab="faq-{{ block.id }}">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
                <line x1="12" y1="17" x2="12.01" y2="17"/>
              </svg>
              {{ block.settings.title | default: 'FAQ' }}
            </button>
          {% endif %}
      {% endcase %}
    {% endfor %}
  </div>

  <!-- Tab Contents -->
  {% assign first_active = true %}
  {% for block in section.blocks %}
    {% case block.type %}

      {% when 'feaures' %}
        {% if product_features != blank %}
          <div class="tab-content {% if first_active %}active{% endif %}" id="features-{{ block.id }}">
            {% for feature_group in product_features %}
              <h2 class="section-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="23" height="20" viewBox="0 0 23 20" fill="none">
                  <path d="M12.3792 0.703125C12.1721 0.273438 11.7346 0 11.2542 0C10.7737 0 10.3401 0.273438 10.1292 0.703125L7.61744 5.87109L2.00806 6.69922C1.53931 6.76953 1.14869 7.09766 1.00416 7.54688C0.859627 7.99609 0.976814 8.49219 1.31275 8.82422L5.38306 12.8516L4.42213 18.543C4.344 19.0117 4.53931 19.4883 4.92603 19.7656C5.31275 20.043 5.82447 20.0781 6.24635 19.8555L11.2581 17.1797L16.2698 19.8555C16.6917 20.0781 17.2034 20.0469 17.5901 19.7656C17.9768 19.4844 18.1721 19.0117 18.094 18.543L17.1292 12.8516L21.1995 8.82422C21.5354 8.49219 21.6565 7.99609 21.5081 7.54688C21.3596 7.09766 20.9729 6.76953 20.5042 6.69922L14.8909 5.87109L12.3792 0.703125Z" fill="#0066CC"/>
                </svg>
                {{ feature_group.title | default: 'Features & Benefits' }}
              </h2>

              <div class="features-content">
                <div class="features-list-wrapper">
                  <ul class="features-list">
                    {% assign features = feature_group.list | newline_to_br | split: '<br />' %}
                    {% for feature in features %}
                      {% if feature != blank %}
                        <li>
                          <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 14 10" fill="none">
                            <path d="M13.7066 0.292969C14.0973 0.683594 14.0973 1.31797 13.7066 1.70859L5.70664 9.70859C5.31602 10.0992 4.68164 10.0992 4.29102 9.70859L0.291016 5.70859C-0.0996094 5.31797 -0.0996094 4.68359 0.291016 4.29297C0.681641 3.90234 1.31602 3.90234 1.70664 4.29297L5.00039 7.58359L12.2941 0.292969C12.6848 -0.0976562 13.3191 -0.0976562 13.7098 0.292969H13.7066Z" fill="#0A84FF"/>
                          </svg>
                          {{ feature }}
                        </li>
                      {% endif %}
                    {% endfor %}
                  </ul>
                </div>

                {% if feature_group.feature_images.value and feature_group.feature_images.value.size > 0 %}
                  <div class="features-image">
                    {% assign feature_img = feature_group.feature_images.value | first %}
                    <img
                      src="{{ feature_img | image_url: width: 600 }}"
                      alt="{{ feature_img.alt | default: 'Feature image' }}"
                      loading="lazy"
                    >
                  </div>
                {% endif %}
              </div>
            {% endfor %}
          </div>
          {% assign first_active = false %}
        {% endif %}

      {% when 'specification' %}
        {% if product_specification != blank %}
          <div class="tab-content" id="specification-{{ block.id }}">
            <h2 class="section-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="23" height="20" viewBox="0 0 23 20" fill="none">
                <path d="M12.3792 0.703125C12.1721 0.273438 11.7346 0 11.2542 0C10.7737 0 10.3401 0.273438 10.1292 0.703125L7.61744 5.87109L2.00806 6.69922C1.53931 6.76953 1.14869 7.09766 1.00416 7.54688C0.859627 7.99609 0.976814 8.49219 1.31275 8.82422L5.38306 12.8516L4.42213 18.543C4.344 19.0117 4.53931 19.4883 4.92603 19.7656C5.31275 20.043 5.82447 20.0781 6.24635 19.8555L11.2581 17.1797L16.2698 19.8555C16.6917 20.0781 17.2034 20.0469 17.5901 19.7656C17.9768 19.4844 18.1721 19.0117 18.094 18.543L17.1292 12.8516L21.1995 8.82422C21.5354 8.49219 21.6565 7.99609 21.5081 7.54688C21.3596 7.09766 20.9729 6.76953 20.5042 6.69922L14.8909 5.87109L12.3792 0.703125Z" fill="#0066CC"/>
              </svg>
              {{ block.settings.title | default: 'Specifications' }}
            </h2>

            {% for spec_table in product_specification %}
              {% if spec_table.title != blank %}
                <div class="spec-table-title">{{ spec_table.title }}</div>
              {% endif %}

              <table class="spec-table">
                <tbody>
                  {% assign table_data = spec_table.body | newline_to_br | split: '<br />' %}
                  {% for row in table_data %}
                    {% assign cols = row | split: ';' %}
                    {% if cols.size >= 2 %}
                      <tr>
                        <td>{{ cols[0] }}</td>
                        <td>{{ cols[1] }}</td>
                      </tr>
                    {% endif %}
                  {% endfor %}
                </tbody>
              </table>
            {% endfor %}
          </div>
        {% endif %}

      {% when 'whats_included' %}
        {% if block.settings.content != blank or product.metafields.custom.whats_included != blank %}
          <div class="tab-content" id="whats-included-{{ block.id }}">
            <h2 class="section-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="15" viewBox="0 0 20 15" fill="none">
                <path d="M1.47049 0.288736C1.56848 0.0894964 1.78405 -0.0248215 2.00289 0.00457457L9.99861 1.00404L17.9943 0.00457457C18.2132 -0.0215552 18.4287 0.0927626 18.5267 0.288736L19.8887 3.01277C20.1827 3.59742 19.8691 4.30619 19.242 4.48584L13.905 6.01116C13.451 6.14181 12.9643 5.94911 12.7226 5.54409L9.99861 1.00404L7.27458 5.54409C7.03288 5.94911 6.54621 6.14181 6.0922 6.01116L0.758456 4.48584C0.128074 4.30619 -0.182218 3.59742 0.111743 3.01277L1.47049 0.288736ZM10.0345 3.09442L11.8277 6.07975C12.3144 6.88978 13.2844 7.27519 14.1957 7.0139L18.3601 5.82499V11.2796C18.3601 11.9982 17.8702 12.6253 17.1712 12.8016L10.5049 14.4674C10.1717 14.5523 9.82223 14.5523 9.49234 14.4674L2.82598 12.8016C2.127 12.622 1.63707 11.9949 1.63707 11.2763V5.82172L5.80477 7.0139C6.71279 7.27519 7.68612 6.88978 8.17279 6.07975L9.96268 3.09442H10.0345Z" fill="#0066CC"/>
              </svg>
              {{ block.settings.title | default: "What's Included" }}
            </h2>

            <div class="whats-included-content">
              <div class="features-list-wrapper">
                <ul class="features-list">
                  {% assign included_items = block.settings.content | newline_to_br | split: '<br />' %}
                  {% for item in included_items %}
                    {% if item != blank %}
                      <li>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                          <circle cx="12" cy="12" r="10" fill="#4190D2"/>
                          <path d="M8 12l3 3 5-6" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        {{ item }}
                      </li>
                    {% endif %}
                  {% endfor %}
                </ul>
              </div>

              {% if block.settings.image != blank %}
                <div class="features-image">
                  <img
                    src="{{ block.settings.image | image_url: width: 600 }}"
                    alt="What's included"
                    loading="lazy"
                  >
                </div>
              {% endif %}
            </div>
          </div>
        {% endif %}

      {% when 'video' %}
        {% if product.metafields.custom.section_video.value != blank %}
          <div class="tab-content" id="video-{{ block.id }}">
            <h2 class="section-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 18" fill="none">
                <path d="M4.8 0C2.14082 0 0 2.14082 0 4.8V13.2C0 15.8592 2.14082 18 4.8 18H19.2C21.8592 18 24 15.8592 24 13.2V4.8C24 2.14082 21.8592 0 19.2 0H4.8ZM9 4.8L15.6 9L9 13.2V4.8Z" fill="#0A84FF"/>
              </svg>
              {{ block.settings.title | default: 'Video' }}
            </h2>

            <div class="video-wrapper" id="video-container-{{ block.id }}">
              {% assign video_url = product.metafields.custom.section_video.value.link.value | default: product.metafields.custom.section_video.value %}
              {% assign video_id = video_url | split: 'v=' | last | split: '&' | first %}
              {% if video_url contains 'youtu.be' %}
                {% assign video_id = video_url | split: 'youtu.be/' | last | split: '?' | first %}
              {% endif %}

              <img
                src="https://img.youtube.com/vi/{{ video_id }}/maxresdefault.jpg"
                alt="Video thumbnail"
                loading="lazy"
              >
              <div class="video-play-btn" data-video-id="{{ video_id }}" data-container="video-container-{{ block.id }}">
                <svg viewBox="0 0 24 24" fill="#000">
                  <polygon points="5 3 19 12 5 21 5 3"/>
                </svg>
              </div>
            </div>
          </div>
        {% endif %}

      {% when 'downloads' %}
        {% if product.metafields.custom.accordion_downloads.value != blank %}
          <div class="tab-content" id="downloads-{{ block.id }}">
            <h2 class="section-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 18" fill="none">
                <path d="M17.3604 4.74792H17.1542C16.9271 4.74792 16.7521 4.56875 16.7323 4.34271C16.5271 1.91039 14.4875 0 12.0011 0C9.51561 0 7.47594 1.91045 7.2698 4.34271C7.25105 4.56876 7.07501 4.74792 6.84793 4.74792H6.64168C3.15098 4.74792 0.10828 7.43754 0.00294582 10.9261C-0.105389 14.5355 2.78831 17.496 6.37394 17.496H17.6261C21.2114 17.496 24.1053 14.5355 23.9971 10.9261C23.8918 7.43754 20.849 4.74792 17.3583 4.74792H17.3604ZM15.8885 11.4709L12.4498 15.0208C12.205 15.274 11.7988 15.274 11.554 15.0208L8.11529 11.4709C7.73195 11.0751 8.01216 10.4126 8.56322 10.4126H10.3184C10.4393 10.4126 10.5372 10.3146 10.5372 10.1938V6.41564C10.5372 5.73958 11.0851 5.19168 11.7611 5.19168H12.2424C12.9185 5.19168 13.4664 5.7396 13.4664 6.41564V10.1938C13.4664 10.3146 13.5643 10.4126 13.6851 10.4126H15.4403C15.9914 10.4126 16.2716 11.0751 15.8883 11.4709H15.8885Z" fill="#0A84FF"/>
              </svg>
              {{ block.settings.title | default: 'Download' }}
            </h2>

            <div class="downloads-list">
              {% for item in product.metafields.custom.accordion_downloads.value %}
                <div class="download-item">
                  <span class="download-item-name">{{ item.name }}</span>
                  <a href="{{ item.url }}" class="download-btn" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                      <path d="M9 1C9 0.446875 8.55313 0 8 0C7.44688 0 7 0.446875 7 1V8.58438L4.70625 6.29063C4.31563 5.9 3.68125 5.9 3.29063 6.29063C2.9 6.68125 2.9 7.31563 3.29063 7.70625L7.29063 11.7063C7.68125 12.0969 8.31563 12.0969 8.70625 11.7063L12.7063 7.70625C13.0969 7.31563 13.0969 6.68125 12.7063 6.29063C12.3156 5.9 11.6812 5.9 11.2906 6.29063L9 8.58438V1ZM2 11C0.896875 11 0 11.8969 0 13V14C0 15.1031 0.896875 16 2 16H14C15.1031 16 16 15.1031 16 14V13C16 11.8969 15.1031 11 14 11H10.8281L9.4125 12.4156C8.63125 13.1969 7.36562 13.1969 6.58437 12.4156L5.17188 11H2ZM13.5 12.75C13.6989 12.75 13.8897 12.829 14.0303 12.9697C14.171 13.1103 14.25 13.3011 14.25 13.5C14.25 13.6989 14.171 13.8897 14.0303 14.0303C13.8897 14.171 13.6989 14.25 13.5 14.25C13.3011 14.25 13.1103 14.171 12.9697 14.0303C12.829 13.8897 12.75 13.6989 12.75 13.5C12.75 13.3011 12.829 13.1103 12.9697 12.9697C13.1103 12.829 13.3011 12.75 13.5 12.75Z" fill="white"/>
                    </svg>
                    DOWNLOAD PDF
                  </a>
                </div>
              {% endfor %}
            </div>
          </div>
        {% endif %}

      {% when 'faq' %}
        {% if product.metafields.custom.section_custom_faq_dropdown_list != blank %}
          <div class="tab-content" id="faq-{{ block.id }}">
            <h2 class="section-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="23" height="20" viewBox="0 0 23 20" fill="none">
                <path d="M12.3792 0.703125C12.1721 0.273438 11.7346 0 11.2542 0C10.7737 0 10.3401 0.273438 10.1292 0.703125L7.61744 5.87109L2.00806 6.69922C1.53931 6.76953 1.14869 7.09766 1.00416 7.54688C0.859627 7.99609 0.976814 8.49219 1.31275 8.82422L5.38306 12.8516L4.42213 18.543C4.344 19.0117 4.53931 19.4883 4.92603 19.7656C5.31275 20.043 5.82447 20.0781 6.24635 19.8555L11.2581 17.1797L16.2698 19.8555C16.6917 20.0781 17.2034 20.0469 17.5901 19.7656C17.9768 19.4844 18.1721 19.0117 18.094 18.543L17.1292 12.8516L21.1995 8.82422C21.5354 8.49219 21.6565 7.99609 21.5081 7.54688C21.3596 7.09766 20.9729 6.76953 20.5042 6.69922L14.8909 5.87109L12.3792 0.703125Z" fill="#0066CC"/>
              </svg>
              {{ block.settings.title | default: 'FAQ' }}
            </h2>

            <div class="faq-list">
              {% for faq in product.metafields.custom.section_custom_faq_dropdown_list.value %}
                <details class="faq-item">
                  <summary>{{ faq.question }}</summary>
                  <div class="faq-answer">{{ faq.answer }}</div>
                </details>
              {% endfor %}
            </div>
          </div>
        {% endif %}

    {% endcase %}
  {% endfor %}
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const container = document.querySelector('#accordion-tabs-{{ section.id }}');
  if (!container) return;

  const tabButtons = container.querySelectorAll('.tab-button');
  const tabContents = container.querySelectorAll('.tab-content');

  // Tab switching logic
  tabButtons.forEach(button => {
    button.addEventListener('click', function() {
      const tabId = this.getAttribute('data-tab');

      // Remove active from all buttons and contents
      tabButtons.forEach(btn => btn.classList.remove('active'));
      tabContents.forEach(content => content.classList.remove('active'));

      // Add active to clicked button and corresponding content
      this.classList.add('active');
      const targetContent = container.querySelector('#' + tabId);
      if (targetContent) {
        targetContent.classList.add('active');
      }
    });
  });

  // Video play functionality
  const playButtons = container.querySelectorAll('.video-play-btn');
  playButtons.forEach(btn => {
    btn.addEventListener('click', function() {
      const videoId = this.getAttribute('data-video-id');
      const containerId = this.getAttribute('data-container');
      const videoContainer = document.getElementById(containerId);

      if (videoContainer && videoId) {
        videoContainer.innerHTML = `
          <iframe
            width="100%"
            height="450"
            src="https://www.youtube.com/embed/${videoId}?autoplay=1"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
            style="border-radius: 12px;"
          ></iframe>
        `;
      }
    });
  });
});
</script>

{% schema %}
{
  "name": "Accordion tab2",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section title"
    }
  ],
  "blocks": [
    {
      "type": "feaures",
      "name": "Features",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Tab Title",
          "default": "Features"
        }
      ]
    },
    {
      "type": "specification",
      "name": "Specifications",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Tab Title",
          "default": "Specifications"
        }
      ]
    },
    {
      "type": "whats_included",
      "name": "What's Included",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Tab Title",
          "default": "What's Included"
        },
        {
          "type": "textarea",
          "id": "content",
          "label": "Items List (one per line)"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    },
    {
      "type": "video",
      "name": "Video",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Tab Title",
          "default": "Video"
        }
      ]
    },
    {
      "type": "downloads",
      "name": "Downloads",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Tab Title",
          "default": "Download"
        }
      ]
    },
    {
      "type": "faq",
      "name": "FAQ",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Tab Title",
          "default": "FAQ"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Accordion tab2"
    }
  ]
}
{% endschema %}
