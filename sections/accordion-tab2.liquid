{% assign product_specification = product.metafields.custom.specification_table2.value %}
{% assign product_features = product.metafields.custom.accordion_features2.value %}

{% if product_specification == blank and product_features == blank and product.metafields.custom.section_video.value == blank and product.metafields.custom.section_custom_faq_dropdown_list == blank and product.metafields.custom.accordion_downloads.value == blank %}
  <style>
    #shopify-section-{{ section.id }} {
      display: none;
    }
  </style>
{% endif %}

<style>
  #shopify-section-{{ section.id }} {
    background: #0a1628;
    font-family: 'Montserrat', sans-serif;
  }

  #shopify-section-{{ section.id }} a {
    color: #4190D2;
    text-decoration: none;
  }

  /* Tabs Container */
  #shopify-section-{{ section.id }} .tabs-container {
    border-radius: 24px;
    border: 1px solid rgba(255, 255, 255, 0.10);
    background: rgba(255, 255, 255, 0.01);
    box-shadow: 0 0 80px 0 rgba(10, 132, 255, 0.20);
    display: flex;
    max-width: 1280px;
    padding: 12px 28px 28px 28px;
    flex-direction: column;
    align-items: flex-start;
    gap: 60px;
    margin: 0 auto;
  }

  #shopify-section-{{ section.id }} .tabs-wrapper {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-bottom: 40px;
  }

  #shopify-section-{{ section.id }} .tab-button {
    background: transparent;
    border: 1px solid #2a3f5f;
    color: #fff;
    padding: 12px 24px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  #shopify-section-{{ section.id }} .tab-button:hover {
    border-color: #4190D2;
  }

  #shopify-section-{{ section.id }} .tab-button.active {
    background: #4190D2;
    border-color: #4190D2;
    color: #fff;
  }

  #shopify-section-{{ section.id }} .tab-button svg {
    width: 16px;
    height: 16px;
  }

  /* Tab Content */
  #shopify-section-{{ section.id }} .tab-content {
    display: none;
  }

  #shopify-section-{{ section.id }} .tab-content.active {
    display: block;
  }

  /* Section Title */
  #shopify-section-{{ section.id }} .section-title {
    color: #4190D2;
    font-size: 24px;
    font-weight: 600;
    margin: 0 0 30px 0;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  #shopify-section-{{ section.id }} .section-title svg {
    flex-shrink: 0;
  }

  /* Features Section */
  #shopify-section-{{ section.id }} .features-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    align-items: start;
  }

  #shopify-section-{{ section.id }} .features-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  #shopify-section-{{ section.id }} .features-list li {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    color: #b0b8c4;
    font-size: 14px;
    line-height: 1.6;
    margin-bottom: 16px;
  }

  #shopify-section-{{ section.id }} .features-list li svg {
    min-width: 18px;
    margin-top: 2px;
  }

  #shopify-section-{{ section.id }} .features-image {
    border-radius: 8px;
    overflow: hidden;
  }

  #shopify-section-{{ section.id }} .features-image img {
    width: 100%;
    height: auto;
    display: block;
  }

  #shopify-section-{{ section.id }} .sub-section-title {
    color: #4190D2;
    font-size: 18px;
    font-weight: 600;
    margin: 40px 0 20px 0;
  }

  /* Specifications Table */
  #shopify-section-{{ section.id }} .spec-table {
    width: 100%;
    border-collapse: collapse;
  }

  #shopify-section-{{ section.id }} .spec-table td {
    padding: 16px 20px;
    border-bottom: 1px solid #1e2d44;
    color: #b0b8c4;
    font-size: 14px;
  }

  #shopify-section-{{ section.id }} .spec-table td:first-child {
    color: #fff;
    font-weight: 500;
    width: 40%;
  }

  #shopify-section-{{ section.id }} .spec-table-title {
    color: #fff;
    font-size: 16px;
    font-weight: 600;
    padding: 20px;
    background: #0d1c30;
    border-bottom: 1px solid #1e2d44;
  }

  /* Video Section */
  #shopify-section-{{ section.id }} .video-wrapper {
    position: relative;
    width: 100%;
    max-width: 800px;
    border-radius: 12px;
    overflow: hidden;
  }

  #shopify-section-{{ section.id }} .video-wrapper img {
    width: 100%;
    height: auto;
    display: block;
  }

  #shopify-section-{{ section.id }} .video-play-btn {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80px;
    height: 80px;
    background: rgba(255,255,255,0.9);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.3s ease;
  }

  #shopify-section-{{ section.id }} .video-play-btn:hover {
    transform: translate(-50%, -50%) scale(1.1);
  }

  #shopify-section-{{ section.id }} .video-play-btn svg {
    width: 30px;
    height: 30px;
    margin-left: 5px;
  }

  /* Downloads Section */
  #shopify-section-{{ section.id }} .downloads-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  #shopify-section-{{ section.id }} .download-item {
    background: #0d1c30;
    border-radius: 8px;
    padding: 20px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border: 1px solid #1e2d44;
  }

  #shopify-section-{{ section.id }} .download-item-name {
    color: #fff;
    font-size: 14px;
    font-weight: 400;
  }

  #shopify-section-{{ section.id }} .download-btn {
    background: #4190D2;
    color: #fff;
    padding: 10px 20px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 600;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: opacity 0.3s ease;
  }

  #shopify-section-{{ section.id }} .download-btn:hover {
    opacity: 0.85;
  }

  #shopify-section-{{ section.id }} .download-btn svg {
    width: 14px;
    height: 14px;
  }

  /* What's Included Section */
  #shopify-section-{{ section.id }} .whats-included-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    align-items: start;
  }

  /* Responsive */
  @media screen and (max-width: 768px) {
    #shopify-section-{{ section.id }} .tabs-wrapper {
      overflow-x: auto;
      flex-wrap: nowrap;
      padding-bottom: 10px;
    }

    #shopify-section-{{ section.id }} .tab-button {
      white-space: nowrap;
      padding: 10px 18px;
      font-size: 12px;
    }

    #shopify-section-{{ section.id }} .features-content,
    #shopify-section-{{ section.id }} .whats-included-content {
      grid-template-columns: 1fr;
    }

    #shopify-section-{{ section.id }} .section-title {
      font-size: 20px;
    }

    #shopify-section-{{ section.id }} .download-item {
      flex-direction: column;
      align-items: flex-start;
      gap: 15px;
    }

    #shopify-section-{{ section.id }} .download-btn {
      width: 100%;
      justify-content: center;
    }
  }
</style>

<section class="tabs-container" id="accordion-tabs-{{ section.id }}">
  <!-- Tab Buttons -->
  <div class="tabs-wrapper">
    {% for block in section.blocks %}
      {% case block.type %}
        {% when 'feaures' %}
          {% if product_features != blank %}
            <button class="tab-button {% if forloop.first %}active{% endif %}" data-tab="features-{{ block.id }}">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 12l2 2 4-4"/>
                <circle cx="12" cy="12" r="10"/>
              </svg>
              {{ block.settings.title | default: 'Features' }}
            </button>
          {% endif %}

        {% when 'specification' %}
          {% if product_specification != blank %}
            <button class="tab-button" data-tab="specification-{{ block.id }}">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"/>
                <rect x="9" y="3" width="6" height="4" rx="1"/>
                <path d="M9 12h6M9 16h6"/>
              </svg>
              {{ block.settings.title | default: 'Specifications' }}
            </button>
          {% endif %}

        {% when 'whats_included' %}
          {% if block.settings.content != blank or product.metafields.custom.whats_included != blank %}
            <button class="tab-button" data-tab="whats-included-{{ block.id }}">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/>
              </svg>
              {{ block.settings.title | default: "What's Included" }}
            </button>
          {% endif %}

        {% when 'video' %}
          {% if product.metafields.custom.section_video.value != blank %}
            <button class="tab-button" data-tab="video-{{ block.id }}">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="5 3 19 12 5 21 5 3"/>
              </svg>
              {{ block.settings.title | default: 'Video' }}
            </button>
          {% endif %}

        {% when 'downloads' %}
          {% if product.metafields.custom.accordion_downloads.value != blank %}
            <button class="tab-button" data-tab="downloads-{{ block.id }}">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
              {{ block.settings.title | default: 'Download' }}
            </button>
          {% endif %}

        {% when 'faq' %}
          {% if product.metafields.custom.section_custom_faq_dropdown_list != blank %}
            <button class="tab-button" data-tab="faq-{{ block.id }}">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
                <line x1="12" y1="17" x2="12.01" y2="17"/>
              </svg>
              {{ block.settings.title | default: 'FAQ' }}
            </button>
          {% endif %}
      {% endcase %}
    {% endfor %}
  </div>

  <!-- Tab Contents -->
  {% assign first_active = true %}
  {% for block in section.blocks %}
    {% case block.type %}

      {% when 'feaures' %}
        {% if product_features != blank %}
          <div class="tab-content {% if first_active %}active{% endif %}" id="features-{{ block.id }}">
            {% for feature_group in product_features %}
              <h2 class="section-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="23" height="20" viewBox="0 0 23 20" fill="none">
                  <path d="M12.3792 0.703125C12.1721 0.273438 11.7346 0 11.2542 0C10.7737 0 10.3401 0.273438 10.1292 0.703125L7.61744 5.87109L2.00806 6.69922C1.53931 6.76953 1.14869 7.09766 1.00416 7.54688C0.859627 7.99609 0.976814 8.49219 1.31275 8.82422L5.38306 12.8516L4.42213 18.543C4.344 19.0117 4.53931 19.4883 4.92603 19.7656C5.31275 20.043 5.82447 20.0781 6.24635 19.8555L11.2581 17.1797L16.2698 19.8555C16.6917 20.0781 17.2034 20.0469 17.5901 19.7656C17.9768 19.4844 18.1721 19.0117 18.094 18.543L17.1292 12.8516L21.1995 8.82422C21.5354 8.49219 21.6565 7.99609 21.5081 7.54688C21.3596 7.09766 20.9729 6.76953 20.5042 6.69922L14.8909 5.87109L12.3792 0.703125Z" fill="#0066CC"/>
                </svg>
                {{ feature_group.title | default: 'Features & Benefits' }}
              </h2>

              <div class="features-content">
                <div class="features-list-wrapper">
                  <ul class="features-list">
                    {% assign features = feature_group.list | newline_to_br | split: '<br />' %}
                    {% for feature in features %}
                      {% if feature != blank %}
                        <li>
                          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="10" viewBox="0 0 14 10" fill="none">
                            <path d="M13.7066 0.292969C14.0973 0.683594 14.0973 1.31797 13.7066 1.70859L5.70664 9.70859C5.31602 10.0992 4.68164 10.0992 4.29102 9.70859L0.291016 5.70859C-0.0996094 5.31797 -0.0996094 4.68359 0.291016 4.29297C0.681641 3.90234 1.31602 3.90234 1.70664 4.29297L5.00039 7.58359L12.2941 0.292969C12.6848 -0.0976562 13.3191 -0.0976562 13.7098 0.292969H13.7066Z" fill="#0A84FF"/>
                          </svg>
                          {{ feature }}
                        </li>
                      {% endif %}
                    {% endfor %}
                  </ul>
                </div>

                {% if feature_group.feature_images.value and feature_group.feature_images.value.size > 0 %}
                  <div class="features-image">
                    {% assign feature_img = feature_group.feature_images.value | first %}
                    <img
                      src="{{ feature_img | image_url: width: 600 }}"
                      alt="{{ feature_img.alt | default: 'Feature image' }}"
                      loading="lazy"
                    >
                  </div>
                {% endif %}
              </div>
            {% endfor %}
          </div>
          {% assign first_active = false %}
        {% endif %}

      {% when 'specification' %}
        {% if product_specification != blank %}
          <div class="tab-content" id="specification-{{ block.id }}">
            <h2 class="section-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="23" height="20" viewBox="0 0 23 20" fill="none">
                <path d="M12.3792 0.703125C12.1721 0.273438 11.7346 0 11.2542 0C10.7737 0 10.3401 0.273438 10.1292 0.703125L7.61744 5.87109L2.00806 6.69922C1.53931 6.76953 1.14869 7.09766 1.00416 7.54688C0.859627 7.99609 0.976814 8.49219 1.31275 8.82422L5.38306 12.8516L4.42213 18.543C4.344 19.0117 4.53931 19.4883 4.92603 19.7656C5.31275 20.043 5.82447 20.0781 6.24635 19.8555L11.2581 17.1797L16.2698 19.8555C16.6917 20.0781 17.2034 20.0469 17.5901 19.7656C17.9768 19.4844 18.1721 19.0117 18.094 18.543L17.1292 12.8516L21.1995 8.82422C21.5354 8.49219 21.6565 7.99609 21.5081 7.54688C21.3596 7.09766 20.9729 6.76953 20.5042 6.69922L14.8909 5.87109L12.3792 0.703125Z" fill="#0066CC"/>
              </svg>
              {{ block.settings.title | default: 'Specifications' }}
            </h2>

            {% for spec_table in product_specification %}
              {% if spec_table.title != blank %}
                <div class="spec-table-title">{{ spec_table.title }}</div>
              {% endif %}

              <table class="spec-table">
                <tbody>
                  {% assign table_data = spec_table.body | newline_to_br | split: '<br />' %}
                  {% for row in table_data %}
                    {% assign cols = row | split: ';' %}
                    {% if cols.size >= 2 %}
                      <tr>
                        <td>{{ cols[0] }}</td>
                        <td>{{ cols[1] }}</td>
                      </tr>
                    {% endif %}
                  {% endfor %}
                </tbody>
              </table>
            {% endfor %}
          </div>
        {% endif %}

      {% when 'whats_included' %}
        {% if block.settings.content != blank or product.metafields.custom.whats_included != blank %}
          <div class="tab-content" id="whats-included-{{ block.id }}">
            <h2 class="section-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="15" viewBox="0 0 20 15" fill="none">
                <path d="M1.47049 0.288736C1.56848 0.0894964 1.78405 -0.0248215 2.00289 0.00457457L9.99861 1.00404L17.9943 0.00457457C18.2132 -0.0215552 18.4287 0.0927626 18.5267 0.288736L19.8887 3.01277C20.1827 3.59742 19.8691 4.30619 19.242 4.48584L13.905 6.01116C13.451 6.14181 12.9643 5.94911 12.7226 5.54409L9.99861 1.00404L7.27458 5.54409C7.03288 5.94911 6.54621 6.14181 6.0922 6.01116L0.758456 4.48584C0.128074 4.30619 -0.182218 3.59742 0.111743 3.01277L1.47049 0.288736ZM10.0345 3.09442L11.8277 6.07975C12.3144 6.88978 13.2844 7.27519 14.1957 7.0139L18.3601 5.82499V11.2796C18.3601 11.9982 17.8702 12.6253 17.1712 12.8016L10.5049 14.4674C10.1717 14.5523 9.82223 14.5523 9.49234 14.4674L2.82598 12.8016C2.127 12.622 1.63707 11.9949 1.63707 11.2763V5.82172L5.80477 7.0139C6.71279 7.27519 7.68612 6.88978 8.17279 6.07975L9.96268 3.09442H10.0345Z" fill="#0066CC"/>
              </svg>
              {{ block.settings.title | default: "What's Included" }}
            </h2>

            <div class="whats-included-content">
              <div class="features-list-wrapper">
                <ul class="features-list">
                  {% assign included_items = block.settings.content | newline_to_br | split: '<br />' %}
                  {% for item in included_items %}
                    {% if item != blank %}
                      <li>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                          <circle cx="12" cy="12" r="10" fill="#4190D2"/>
                          <path d="M8 12l3 3 5-6" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        {{ item }}
                      </li>
                    {% endif %}
                  {% endfor %}
                </ul>
              </div>

              {% if block.settings.image != blank %}
                <div class="features-image">
                  <img
                    src="{{ block.settings.image | image_url: width: 600 }}"
                    alt="What's included"
                    loading="lazy"
                  >
                </div>
              {% endif %}
            </div>
          </div>
        {% endif %}

      {% when 'video' %}
        {% if product.metafields.custom.section_video.value != blank %}
          <div class="tab-content" id="video-{{ block.id }}">
            <h2 class="section-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 18" fill="none">
                <path d="M4.8 0C2.14082 0 0 2.14082 0 4.8V13.2C0 15.8592 2.14082 18 4.8 18H19.2C21.8592 18 24 15.8592 24 13.2V4.8C24 2.14082 21.8592 0 19.2 0H4.8ZM9 4.8L15.6 9L9 13.2V4.8Z" fill="#0A84FF"/>
              </svg>
              {{ block.settings.title | default: 'Video' }}
            </h2>

            <div class="video-wrapper" id="video-container-{{ block.id }}">
              {% assign video_url = product.metafields.custom.section_video.value.link.value | default: product.metafields.custom.section_video.value %}
              {% assign video_id = video_url | split: 'v=' | last | split: '&' | first %}
              {% if video_url contains 'youtu.be' %}
                {% assign video_id = video_url | split: 'youtu.be/' | last | split: '?' | first %}
              {% endif %}

              <img
                src="https://img.youtube.com/vi/{{ video_id }}/maxresdefault.jpg"
                alt="Video thumbnail"
                loading="lazy"
              >
              <div class="video-play-btn" data-video-id="{{ video_id }}" data-container="video-container-{{ block.id }}">
                <svg viewBox="0 0 24 24" fill="#000">
                  <polygon points="5 3 19 12 5 21 5 3"/>
                </svg>
              </div>
            </div>
          </div>
        {% endif %}

      {% when 'downloads' %}
        {% if product.metafields.custom.accordion_downloads.value != blank %}
          <div class="tab-content" id="downloads-{{ block.id }}">
            <h2 class="section-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 18" fill="none">
                <path d="M17.3604 4.74792H17.1542C16.9271 4.74792 16.7521 4.56875 16.7323 4.34271C16.5271 1.91039 14.4875 0 12.0011 0C9.51561 0 7.47594 1.91045 7.2698 4.34271C7.25105 4.56876 7.07501 4.74792 6.84793 4.74792H6.64168C3.15098 4.74792 0.10828 7.43754 0.00294582 10.9261C-0.105389 14.5355 2.78831 17.496 6.37394 17.496H17.6261C21.2114 17.496 24.1053 14.5355 23.9971 10.9261C23.8918 7.43754 20.849 4.74792 17.3583 4.74792H17.3604ZM15.8885 11.4709L12.4498 15.0208C12.205 15.274 11.7988 15.274 11.554 15.0208L8.11529 11.4709C7.73195 11.0751 8.01216 10.4126 8.56322 10.4126H10.3184C10.4393 10.4126 10.5372 10.3146 10.5372 10.1938V6.41564C10.5372 5.73958 11.0851 5.19168 11.7611 5.19168H12.2424C12.9185 5.19168 13.4664 5.7396 13.4664 6.41564V10.1938C13.4664 10.3146 13.5643 10.4126 13.6851 10.4126H15.4403C15.9914 10.4126 16.2716 11.0751 15.8883 11.4709H15.8885Z" fill="#0A84FF"/>
              </svg>
              {{ block.settings.title | default: 'Download' }}
            </h2>

            <div class="downloads-list">
              {% for item in product.metafields.custom.accordion_downloads.value %}
                <div class="download-item">
                  <span class="download-item-name">{{ item.name }}</span>
                  <a href="{{ item.url }}" class="download-btn" target="_blank">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                      <polyline points="7 10 12 15 17 10"/>
                      <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    DOWNLOAD PDF
                  </a>
                </div>
              {% endfor %}
            </div>
          </div>
        {% endif %}

      {% when 'faq' %}
        {% if product.metafields.custom.section_custom_faq_dropdown_list != blank %}
          <div class="tab-content" id="faq-{{ block.id }}">
            <h2 class="section-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="23" height="20" viewBox="0 0 23 20" fill="none">
                <path d="M12.3792 0.703125C12.1721 0.273438 11.7346 0 11.2542 0C10.7737 0 10.3401 0.273438 10.1292 0.703125L7.61744 5.87109L2.00806 6.69922C1.53931 6.76953 1.14869 7.09766 1.00416 7.54688C0.859627 7.99609 0.976814 8.49219 1.31275 8.82422L5.38306 12.8516L4.42213 18.543C4.344 19.0117 4.53931 19.4883 4.92603 19.7656C5.31275 20.043 5.82447 20.0781 6.24635 19.8555L11.2581 17.1797L16.2698 19.8555C16.6917 20.0781 17.2034 20.0469 17.5901 19.7656C17.9768 19.4844 18.1721 19.0117 18.094 18.543L17.1292 12.8516L21.1995 8.82422C21.5354 8.49219 21.6565 7.99609 21.5081 7.54688C21.3596 7.09766 20.9729 6.76953 20.5042 6.69922L14.8909 5.87109L12.3792 0.703125Z" fill="#0066CC"/>
              </svg>
              {{ block.settings.title | default: 'FAQ' }}
            </h2>

            <div class="faq-list">
              {% for faq in product.metafields.custom.section_custom_faq_dropdown_list.value %}
                <details class="faq-item">
                  <summary>{{ faq.question }}</summary>
                  <div class="faq-answer">{{ faq.answer }}</div>
                </details>
              {% endfor %}
            </div>
          </div>
        {% endif %}

    {% endcase %}
  {% endfor %}
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const container = document.querySelector('#accordion-tabs-{{ section.id }}');
  if (!container) return;

  const tabButtons = container.querySelectorAll('.tab-button');
  const tabContents = container.querySelectorAll('.tab-content');

  // Tab switching logic
  tabButtons.forEach(button => {
    button.addEventListener('click', function() {
      const tabId = this.getAttribute('data-tab');

      // Remove active from all buttons and contents
      tabButtons.forEach(btn => btn.classList.remove('active'));
      tabContents.forEach(content => content.classList.remove('active'));

      // Add active to clicked button and corresponding content
      this.classList.add('active');
      const targetContent = container.querySelector('#' + tabId);
      if (targetContent) {
        targetContent.classList.add('active');
      }
    });
  });

  // Video play functionality
  const playButtons = container.querySelectorAll('.video-play-btn');
  playButtons.forEach(btn => {
    btn.addEventListener('click', function() {
      const videoId = this.getAttribute('data-video-id');
      const containerId = this.getAttribute('data-container');
      const videoContainer = document.getElementById(containerId);

      if (videoContainer && videoId) {
        videoContainer.innerHTML = `
          <iframe
            width="100%"
            height="450"
            src="https://www.youtube.com/embed/${videoId}?autoplay=1"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
            style="border-radius: 12px;"
          ></iframe>
        `;
      }
    });
  });
});
</script>

{% schema %}
{
  "name": "Accordion tab2",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section title"
    }
  ],
  "blocks": [
    {
      "type": "feaures",
      "name": "Features",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Tab Title",
          "default": "Features"
        }
      ]
    },
    {
      "type": "specification",
      "name": "Specifications",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Tab Title",
          "default": "Specifications"
        }
      ]
    },
    {
      "type": "whats_included",
      "name": "What's Included",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Tab Title",
          "default": "What's Included"
        },
        {
          "type": "textarea",
          "id": "content",
          "label": "Items List (one per line)"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    },
    {
      "type": "video",
      "name": "Video",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Tab Title",
          "default": "Video"
        }
      ]
    },
    {
      "type": "downloads",
      "name": "Downloads",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Tab Title",
          "default": "Download"
        }
      ]
    },
    {
      "type": "faq",
      "name": "FAQ",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Tab Title",
          "default": "FAQ"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Accordion tab2"
    }
  ]
}
{% endschema %}
