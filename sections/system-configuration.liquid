{{ 'system-configuration.css' | asset_url | stylesheet_tag }}

{% comment %} Get LED template data from product metafield {% endcomment %}
{% assign led_data = product.metafields.custom.led_template_data.value %}
{% assign config_data = led_data.system_config %}

<section
  id="system-configuration-{{ section.id }}"
  class="system-configuration {{ section.settings.custom_class }}"
>
  <div class="system-configuration__container">
    <!-- Header Section - Use metafield data if available, otherwise use section settings -->
    {% assign config_title = config_data.title | default: section.settings.heading %}
    {% assign config_description = config_data.description | default: section.settings.subheading %}

    <div class="system-configuration__header">
      {% if section.settings.section_label != blank %}
        <span class="system-configuration__label">{{ section.settings.section_label }}</span>
      {% endif %}
      {% if config_title != blank %}
        <h2 class="system-configuration__heading">{{ config_title }}</h2>
      {% endif %}
      {% if config_description != blank %}
        <p class="system-configuration__subheading">{{ config_description }}</p>
      {% endif %}
    </div>

    <!-- Main Visual Area - Use metafield image if available -->
    {% assign config_display_image = config_data.display_image %}
    {% assign cabinet_specs = config_data.cabinet_specs %}

    <div class="system-configuration__visual">
      {% if config_display_image != blank %}
        <img
          src="{{ config_display_image }}"
          alt="LED Video Wall Configuration"
          class="system-configuration__display-image"
          loading="lazy"
        >
      {% elsif section.settings.display_image != blank %}
        <img
          src="{{ section.settings.display_image | image_url: width: 1200 }}"
          alt="LED Video Wall Configuration"
          class="system-configuration__display-image"
          loading="lazy"
        >
      {% else %}
        <div class="system-configuration__display-placeholder">
          <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            <circle cx="8.5" cy="8.5" r="1.5"></circle>
            <polyline points="21 15 16 10 5 21"></polyline>
          </svg>
          <span>Upload Display Image</span>
        </div>
      {% endif %}
    </div>

    <!-- Detail Cards Section -->
    <div class="system-configuration__cards">
      <!-- Cabinet Detail Card -->
      <div class="system-configuration__card system-configuration__card--cabinet">
        <div class="system-configuration__card-header">
          <div class="system-configuration__card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-7-2h2v-4h4v-2h-4V7h-2v4H8v2h4z"/>
            </svg>
          </div>
          <div class="system-configuration__card-titles">
            <h3 class="system-configuration__card-title">{{ section.settings.cabinet_title }}</h3>
            <p class="system-configuration__card-subtitle">{{ section.settings.cabinet_subtitle }}</p>
          </div>
        </div>

        <div class="system-configuration__card-body">
          <div class="system-configuration__card-image">
            <!-- Image Box Container with labels inside -->
            <div class="system-configuration__cabinet-images-box">
              {% if section.settings.cabinet_image != blank or section.settings.cabinet_image_2 != blank %}
                <div class="system-configuration__cabinet-images-row">
                  {% if section.settings.cabinet_image != blank %}
                    <img
                      src="{{ section.settings.cabinet_image | image_url: width: 400 }}"
                      alt="Individual Cabinet"
                      loading="lazy"
                    >
                  {% endif %}
                  {% if section.settings.cabinet_image_2 != blank %}
                    <img
                      src="{{ section.settings.cabinet_image_2 | image_url: width: 400 }}"
                      alt="Individual Cabinet"
                      loading="lazy"
                    >
                  {% endif %}
                </div>
              {% else %}
                <!-- Placeholder modules -->
                <div class="system-configuration__cabinet-images-row">
                  <div class="system-configuration__cabinet-module-placeholder"></div>
                  <div class="system-configuration__cabinet-module-placeholder"></div>
                </div>
              {% endif %}
              <!-- Labels inside the box -->
              <span class="system-configuration__cabinet-label">{{ section.settings.cabinet_visual_label | default: '4 COB Modules' }}</span>
              <span class="system-configuration__cabinet-sublabel">{{ section.settings.cabinet_visual_sublabel | default: '480 × 270 pixels per cabinet' }}</span>
            </div>
          </div>

          <div class="system-configuration__specs-table">
            <div class="system-configuration__spec-row">
              <span class="system-configuration__spec-label">Dimensions</span>
              <span class="system-configuration__spec-value">{{ cabinet_specs.dimensions | default: section.settings.cabinet_dimensions }}</span>
            </div>
            <div class="system-configuration__spec-row">
              <span class="system-configuration__spec-label">Imperial</span>
              <span class="system-configuration__spec-value">{{ cabinet_specs.imperial | default: section.settings.cabinet_imperial }}</span>
            </div>
            <div class="system-configuration__spec-row">
              <span class="system-configuration__spec-label">Weight</span>
              <span class="system-configuration__spec-value">{{ cabinet_specs.weight | default: section.settings.cabinet_weight }}</span>
            </div>
            <div class="system-configuration__spec-row">
              <span class="system-configuration__spec-label">Resolution</span>
              <span class="system-configuration__spec-value">{{ cabinet_specs.resolution | default: section.settings.cabinet_resolution }}</span>
            </div>
            <div class="system-configuration__spec-row">
              <span class="system-configuration__spec-label">Module Count</span>
              <span class="system-configuration__spec-value">{{ cabinet_specs.modules | default: section.settings.cabinet_modules }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Connection Detail Card -->
      <div class="system-configuration__card system-configuration__card--connection">
        <div class="system-configuration__card-header">
          <div class="system-configuration__card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
            </svg>
          </div>
          <div class="system-configuration__card-titles">
            <h3 class="system-configuration__card-title">{{ section.settings.connection_title }}</h3>
            <p class="system-configuration__card-subtitle">{{ section.settings.connection_subtitle }}</p>
          </div>
        </div>

        <div class="system-configuration__card-body">
          <!-- Connection Image/Visual Area -->
          <div class="system-configuration__card-image">
            <!-- Image Box Container with labels inside -->
            <div class="system-configuration__connection-images-box">
              {% if section.settings.connection_image != blank %}
                <img
                  src="{{ section.settings.connection_image | image_url: width: 400 }}"
                  alt="Cabinet Connection"
                  loading="lazy"
                >
              {% else %}
                <!-- Lock Visual Placeholder -->
                <div class="system-configuration__lock-icon-wrapper">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                  </svg>
                  <span class="system-configuration__lock-badge">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="12" height="12">
                      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                  </span>
                </div>
              {% endif %}
              <!-- Labels inside the box -->
              <span class="system-configuration__cabinet-label">{{ section.settings.connection_visual_label }}</span>
              <span class="system-configuration__cabinet-sublabel">{{ section.settings.connection_visual_sublabel }}</span>
            </div>
          </div>

          <!-- Features List -->
          <div class="system-configuration__features">
            <div class="system-configuration__feature">
              <div class="system-configuration__feature-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
              </div>
              <div class="system-configuration__feature-text">
                <span class="system-configuration__feature-title">{{ section.settings.feature_1_title }}</span>
                <span class="system-configuration__feature-desc">{{ section.settings.feature_1_desc }}</span>
              </div>
            </div>

            <div class="system-configuration__feature">
              <div class="system-configuration__feature-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
              </div>
              <div class="system-configuration__feature-text">
                <span class="system-configuration__feature-title">{{ section.settings.feature_2_title }}</span>
                <span class="system-configuration__feature-desc">{{ section.settings.feature_2_desc }}</span>
              </div>
            </div>

            <div class="system-configuration__feature">
              <div class="system-configuration__feature-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
              </div>
              <div class="system-configuration__feature-text">
                <span class="system-configuration__feature-title">{{ section.settings.feature_3_title }}</span>
                <span class="system-configuration__feature-desc">{{ section.settings.feature_3_desc }}</span>
              </div>
            </div>

            <div class="system-configuration__feature">
              <div class="system-configuration__feature-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
              </div>
              <div class="system-configuration__feature-text">
                <span class="system-configuration__feature-title">{{ section.settings.feature_4_title }}</span>
                <span class="system-configuration__feature-desc">{{ section.settings.feature_4_desc }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- CTA Section -->
    <div class="system-configuration__cta-section">
      {% if section.settings.price_text != blank %}
        <div class="system-configuration__price">
          {{ section.settings.price_text }}
        </div>
      {% endif %}

      <div class="system-configuration__cta-buttons">
        {% if section.settings.primary_btn_text != blank %}
          <a href="{{ section.settings.primary_btn_link }}" class="system-configuration__btn">
            {{ section.settings.primary_btn_text }}
          </a>
        {% endif %}
        {% if section.settings.secondary_btn_text != blank %}
          <a href="{{ section.settings.secondary_btn_link }}" class="system-configuration__btn--secondary">
            {{ section.settings.secondary_btn_text }}
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "System Configuration",
  "tag": "section",
  "class": "system-configuration-wrapper",
  "settings": [
    {
      "type": "header",
      "content": "Header Content"
    },
    {
      "type": "text",
      "id": "section_label",
      "label": "Section Label",
      "default": "SYSTEM ARCHITECTURE"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "System Configuration"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Precision-engineered 8×8 cabinet array delivering 8.2 million pixels across 217 inches of seamless display surface"
    },
    {
      "type": "header",
      "content": "Display Visual"
    },
    {
      "type": "image_picker",
      "id": "display_image",
      "label": "LED Wall Image"
    },
    {
      "type": "header",
      "content": "Cabinet Detail Card"
    },
    {
      "type": "image_picker",
      "id": "cabinet_image",
      "label": "Cabinet Image 1"
    },
    {
      "type": "image_picker",
      "id": "cabinet_image_2",
      "label": "Cabinet Image 2"
    },
    {
      "type": "text",
      "id": "cabinet_visual_label",
      "label": "Visual Label",
      "default": "4 COB Modules"
    },
    {
      "type": "text",
      "id": "cabinet_visual_sublabel",
      "label": "Visual Sublabel",
      "default": "480 × 270 pixels per cabinet"
    },
    {
      "type": "text",
      "id": "cabinet_title",
      "label": "Cabinet Title",
      "default": "Individual Cabinet Detail"
    },
    {
      "type": "text",
      "id": "cabinet_subtitle",
      "label": "Cabinet Subtitle",
      "default": "Precision-engineered modular unit"
    },
    {
      "type": "text",
      "id": "cabinet_dimensions",
      "label": "Dimensions",
      "default": "600mm × 337.5mm × 25mm"
    },
    {
      "type": "text",
      "id": "cabinet_imperial",
      "label": "Imperial",
      "default": "23.62\" × 13.3\" × 1\""
    },
    {
      "type": "text",
      "id": "cabinet_weight",
      "label": "Weight",
      "default": "3.7kg (8.3 lbs)"
    },
    {
      "type": "text",
      "id": "cabinet_resolution",
      "label": "Resolution",
      "default": "480 × 270 pixels"
    },
    {
      "type": "text",
      "id": "cabinet_modules",
      "label": "Module Count",
      "default": "4 COB modules"
    },
    {
      "type": "header",
      "content": "Connection Detail Card"
    },
    {
      "type": "image_picker",
      "id": "connection_image",
      "label": "Connection Image"
    },
    {
      "type": "text",
      "id": "connection_title",
      "label": "Connection Title",
      "default": "Cabinet Connection Detail"
    },
    {
      "type": "text",
      "id": "connection_subtitle",
      "label": "Connection Subtitle",
      "default": "Quick Connect locking mechanism"
    },
    {
      "type": "text",
      "id": "connection_visual_label",
      "label": "Visual Label",
      "default": "Quick Connect Locking"
    },
    {
      "type": "text",
      "id": "connection_visual_sublabel",
      "label": "Visual Sublabel",
      "default": "Tool-free installation system"
    },
    {
      "type": "header",
      "content": "Connection Features"
    },
    {
      "type": "text",
      "id": "feature_1_title",
      "label": "Feature 1 Title",
      "default": "Precision Alignment"
    },
    {
      "type": "text",
      "id": "feature_1_desc",
      "label": "Feature 1 Description",
      "default": "Self-aligning mechanical system ensures perfect cabinet registration"
    },
    {
      "type": "text",
      "id": "feature_2_title",
      "label": "Feature 2 Title",
      "default": "Secure Locking"
    },
    {
      "type": "text",
      "id": "feature_2_desc",
      "label": "Feature 2 Description",
      "default": "Patented quick-release mechanism with safety lock indicators"
    },
    {
      "type": "text",
      "id": "feature_3_title",
      "label": "Feature 3 Title",
      "default": "Hot-Swappable"
    },
    {
      "type": "text",
      "id": "feature_3_desc",
      "label": "Feature 3 Description",
      "default": "Replace cabinets without powering down the entire system"
    },
    {
      "type": "text",
      "id": "feature_4_title",
      "label": "Feature 4 Title",
      "default": "Cable Management"
    },
    {
      "type": "text",
      "id": "feature_4_desc",
      "label": "Feature 4 Description",
      "default": "Integrated routing channels for clean professional installations"
    },
    {
      "type": "header",
      "content": "CTA Section"
    },
    {
      "type": "text",
      "id": "price_text",
      "label": "Price Text",
      "default": "$19,250.00 (30% Deposit)"
    },
    {
      "type": "text",
      "id": "primary_btn_text",
      "label": "Button 1 Text",
      "default": "ORDER NOW"
    },
    {
      "type": "url",
      "id": "primary_btn_link",
      "label": "Button 1 Link"
    },
    {
      "type": "text",
      "id": "secondary_btn_text",
      "label": "Button 2 Text",
      "default": "Book A Call"
    },
    {
      "type": "url",
      "id": "secondary_btn_link",
      "label": "Button 2 Link"
    },
    {
      "type": "header",
      "content": "Styling"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#0a0f14"
    },
    {
      "type": "color",
      "id": "label_color",
      "label": "Label Color",
      "default": "#FFD700"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent Color",
      "default": "#3498db"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 40,
      "max": 150,
      "step": 10,
      "default": 80,
      "unit": "px",
      "label": "Padding Top"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 40,
      "max": 150,
      "step": 10,
      "default": 80,
      "unit": "px",
      "label": "Padding Bottom"
    },
    {
      "type": "text",
      "id": "custom_class",
      "label": "Custom CSS Class"
    }
  ],
  "presets": [
    {
      "name": "System Configuration"
    }
  ]
}
{% endschema %}

<style>
  #system-configuration-{{ section.id }} {
    --sc-bg-color: {{ section.settings.bg_color }};
    --sc-label-color: {{ section.settings.label_color }};
    --sc-accent-color: {{ section.settings.accent_color }};
    --sc-padding-top: {{ section.settings.padding_top }}px;
    --sc-padding-bottom: {{ section.settings.padding_bottom }}px;
  }
</style>
