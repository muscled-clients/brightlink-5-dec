{{ 'experience-scale.css' | asset_url | stylesheet_tag }}

{% comment %} Get LED template data from product metafield {% endcomment %}
{% assign led_data = product.metafields.custom.led_template_data.value %}
{% assign scale_data = led_data.experience_scale %}

<section class="experience-scale" id="experience-scale">
  <div class="experience-scale__container">
    <!-- Header - Use metafield data if available, otherwise use section settings -->
    {% assign scale_title = scale_data.title | default: section.settings.title | default: 'Experience the Scale' %}
    {% assign scale_subtitle = scale_data.subtitle | default: section.settings.subtitle | default: '217 inches of immersive visual excellence' %}
    {% assign scale_image = scale_data.image %}

    <div class="experience-scale__header">
      <div class="experience-scale__header-text">
        {% if section.settings.label != blank %}
          <span class="experience-scale__label">{{ section.settings.label }}</span>
        {% endif %}
        <h2 class="experience-scale__title">{{ scale_title }}</h2>
      </div>
      <p class="experience-scale__subtitle">{{ scale_subtitle }}</p>
    </div>

    <div class="experience-scale__content">
      <div class="experience-scale__display">
      <div class="experience-scale__image-wrapper">
        {% if scale_image != blank %}
          <img
            src="{{ scale_image }}"
            alt="{{ scale_title }}"
            class="experience-scale__image"
            loading="lazy"
            width="1200"
            height="600"
          >
        {% elsif section.settings.image != blank %}
          <img
            src="{{ section.settings.image | image_url: width: 1200 }}"
            alt="{{ scale_title }}"
            class="experience-scale__image"
            loading="lazy"
            width="1200"
            height="600"
          >
        {% else %}
          <div class="experience-scale__image-placeholder">
            <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
            <span>Upload Display Image</span>
          </div>
        {% endif %}


      </div>
      </div>

      <!-- Metrics - Use metafield data if available, otherwise use section settings -->
      <div class="experience-scale__metrics">
        {% if scale_data.metrics.size > 0 %}
        {% for metric in scale_data.metrics %}
          <div class="experience-scale__metric">
            <div class="experience-scale__metric-icon">
              <i>
                <svg xmlns="http://www.w3.org/2000/svg" width="23.625" height="27" viewBox="0 0 24 27" fill="none">
                  <path d="M12 2L2 7v10l10 5 10-5V7L12 2z" fill="#0A84FF"/>
                </svg>
              </i>
            </div>
            <div class="experience-scale__metric-text">
              <span class="experience-scale__metric-value">{{ metric.value }}</span>
              <div class="experience-scale__metric-title-wrapper">
                <span class="experience-scale__metric-label">{{ metric.label }}</span>
                <span class="experience-scale__metric-desc">{{ metric.detail }}</span>
              </div>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <div class="experience-scale__metric">
          <div class="experience-scale__metric-icon">
            <i>
              <svg xmlns="http://www.w3.org/2000/svg" width="23.625" height="27" viewBox="0 0 24 27" fill="none">
                <path d="M2 8V2H8M16 2H22V8M22 19V25H16M8 25H2V19" stroke="#0A84FF" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </i>
          </div>
          <div class="experience-scale__metric-text">
            <span class="experience-scale__metric-value">{{ section.settings.metric1_value | default: '36x' }}</span>
            <div class="experience-scale__metric-title-wrapper">
              <span class="experience-scale__metric-label">{{ section.settings.metric1_label | default: 'Larger' }}</span>
              <span class="experience-scale__metric-desc">{{ section.settings.metric1_desc | default: 'than a typical 65" TV' }}</span>
            </div>
          </div>
        </div>
        <div class="experience-scale__metric">
          <div class="experience-scale__metric-icon">
            <i>
              <svg xmlns="http://www.w3.org/2000/svg" width="23.625" height="27" viewBox="0 0 24 27" fill="none">
                <rect x="2" y="2" width="8" height="8" rx="2" fill="#0A84FF"/>
                <rect x="14" y="2" width="8" height="8" rx="2" fill="#0A84FF"/>
                <rect x="2" y="17" width="8" height="8" rx="2" fill="#0A84FF"/>
                <rect x="14" y="17" width="8" height="8" rx="2" fill="#0A84FF"/>
                <rect x="2" y="9.5" width="8" height="8" rx="2" fill="#0A84FF" fill-opacity="0.5"/>
                <rect x="14" y="9.5" width="8" height="8" rx="2" fill="#0A84FF" fill-opacity="0.5"/>
              </svg>
            </i>
          </div>
          <div class="experience-scale__metric-text">
            <span class="experience-scale__metric-value">{{ section.settings.metric2_value | default: '4x' }}</span>
            <div class="experience-scale__metric-title-wrapper">
              <span class="experience-scale__metric-label">{{ section.settings.metric2_label | default: 'Equivalent' }}</span>
              <span class="experience-scale__metric-desc">{{ section.settings.metric2_desc | default: "to 17' diagonal display" }}</span>
            </div>
          </div>
        </div>
        <div class="experience-scale__metric">
          <div class="experience-scale__metric-icon">
            <i>
              <svg xmlns="http://www.w3.org/2000/svg" width="23.625" height="27" viewBox="0 0 24 27" fill="none">
                <rect x="2" y="2" width="20" height="23" rx="2" stroke="#0A84FF" stroke-width="2.5"/>
                <line x1="2" y1="10" x2="12" y2="10" stroke="#0A84FF" stroke-width="2"/>
                <line x1="12" y1="10" x2="12" y2="25" stroke="#0A84FF" stroke-width="2"/>
              </svg>
            </i>
          </div>
          <div class="experience-scale__metric-text">
            <span class="experience-scale__metric-value">{{ section.settings.metric3_value | default: '141' }}</span>
            <div class="experience-scale__metric-title-wrapper">
              <span class="experience-scale__metric-label">{{ section.settings.metric3_label | default: 'sq ft' }}</span>
              <span class="experience-scale__metric-desc">{{ section.settings.metric3_desc | default: 'of visual real estate' }}</span>
            </div>
          </div>
        </div>
      {% endif %}
      </div>
    </div>

  </div>
</section>

{% schema %}
{
  "name": "Experience Scale",
  "tag": "section",
  "class": "experience-scale-section",
  "settings": [
    {
      "type": "header",
      "content": "Header"
    },
    {
      "type": "text",
      "id": "label",
      "label": "Section Label",
      "default": "IMMERSIVE DISPLAY"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Experience the Scale"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "217 inches of immersive visual excellence"
    },
    {
      "type": "header",
      "content": "Display Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Display Image"
    },
    {
      "type": "header",
      "content": "Metric 1"
    },
    {
      "type": "text",
      "id": "metric1_value",
      "label": "Value",
      "default": "36x"
    },
    {
      "type": "text",
      "id": "metric1_label",
      "label": "Label",
      "default": "Larger"
    },
    {
      "type": "text",
      "id": "metric1_desc",
      "label": "Description",
      "default": "than a typical 65\" TV"
    },
    {
      "type": "header",
      "content": "Metric 2"
    },
    {
      "type": "text",
      "id": "metric2_value",
      "label": "Value",
      "default": "4x"
    },
    {
      "type": "text",
      "id": "metric2_label",
      "label": "Label",
      "default": "Equivalent"
    },
    {
      "type": "text",
      "id": "metric2_desc",
      "label": "Description",
      "default": "to 17' diagonal display"
    },
    {
      "type": "header",
      "content": "Metric 3"
    },
    {
      "type": "text",
      "id": "metric3_value",
      "label": "Value",
      "default": "141"
    },
    {
      "type": "text",
      "id": "metric3_label",
      "label": "Label",
      "default": "sq ft"
    },
    {
      "type": "text",
      "id": "metric3_desc",
      "label": "Description",
      "default": "of visual real estate"
    },
    {
      "type": "header",
      "content": "Call to Action"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "Button Text",
      "default": "Configure Your Display"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "Button Link"
    }
  ],
  "presets": [
    {
      "name": "Experience Scale"
    }
  ]
}
{% endschema %}
