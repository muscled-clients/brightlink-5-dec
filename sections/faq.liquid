<div class="container container--flush container--narrow">
  {% assign faq_title = faq_data.title | default: section.settings.title | default: 'Knowledge Center' %}
  {% assign faq_subtitle = faq_data.subtitle | default: section.settings.subtitle | default: 'Everything you need to know about Pro Spectrum' %}

  <div class="knowledge-center__header">
    <span class="knowledge-center__label" style="color: #FFD700;">{{ section.settings.label | default: 'KNOWLEDGE CENTER' }}</span>
    <h2 class="knowledge-center__title">{{ faq_title }}</h2>
    <p class="knowledge-center__subtitle">{{ faq_subtitle }}</p>
  </div>
  
  <div class="faq" itemscope itemtype="https://schema.org/FAQPage">
    <div class="faq__group-list">
      {%- for block in section.blocks -%}
        {%- if forloop.first or block.type == 'separator' -%}
          <div class="faq__group">
        {%- endif -%}

        {%- case block.type -%}
          {%- when 'separator' -%}
  <div class="faq__group-title-wrapper" {{ block.shopify_attributes }}>
    <h1 class="faq__group-title heading h2" id="block-{{ block.id }}">
      <span class="anchor"></span>
      
      {%- if block.settings.icon_image -%}
        <span class="faq__group-icon" style="
          {% if block.settings.icon_width %}width: {{ block.settings.icon_width }}px;{% endif %}
          {% if block.settings.icon_height %}height: {{ block.settings.icon_height }}px;{% endif %}
          {% if block.settings.icon_color %}color: {{ block.settings.icon_color }};{% endif %}
          {% if block.settings.icon_margin_top %}margin-top: {{ block.settings.icon_margin_top }}px;{% endif %}
          {% if block.settings.icon_margin_right %}margin-right: {{ block.settings.icon_margin_right }}px;{% endif %}
          {% if block.settings.icon_margin_bottom %}margin-bottom: {{ block.settings.icon_margin_bottom }}px;{% endif %}
          {% if block.settings.icon_margin_left %}margin-left: {{ block.settings.icon_margin_left }}px;{% endif %}
        ">
          <img src="{{ block.settings.icon_image | img_url: '200x' }}" 
               alt="{{ block.settings.title | escape }}"
               style="width: 100%; height: 100%; object-fit: contain;">
        </span>
      {%- endif -%}
      
      {{- block.settings.title | escape -}}
    </h1>
  </div>
          {%- when 'question' -%}
  <div class="faq__item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question" {{ block.shopify_attributes }}>
    <div class="faq__item-wrapper">
      <button class="faq__question heading h4" data-action="toggle-collapsible" aria-expanded="false" aria-controls="block-{{ block.id }}" itemprop="name">
        <span class="faq__question-text">{{ block.settings.title | escape }}</span>
        <span class="faq__arrow-icon">
          <svg class="arrow-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
      </button>

      <div id="block-{{ block.id }}" class="faq__answer-wrapper" itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
        <div class="faq__answer rte" itemprop="text">
          {{ block.settings.answer }}
        </div>
      </div>
    </div>
  </div>
        {%- endcase -%}

        {%- if forloop.last or block.type == 'question' and section.blocks[forloop.index].type == 'separator' -%}
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>
  </div>
</div>

<style>
  .faq__group-title-wrapper {
    width: 100%;
}
  .faq__item {
    gap: 16px;
    background: transparent;
    display: flex;
    padding: 28px 12px;
    align-items: center;
    gap: 16px;
    align-self: stretch;
    border: none;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  }
  
  .faq__group {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
  
  button.faq__question.heading.h4 {
    flex: 1 0 0;
    color: rgb(255, 255, 255);
    font-size: 14px;
    font-style: normal;
    font-weight: 600;
    line-height: 20px;
  }
  
  h1.faq__group-title.heading.h2 {
    display: flex;
    align-items: center;
    padding: 29px 12px;
    align-self: stretch;
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.10);
    background: rgba(255, 255, 255, 0.02);
    box-shadow: 0 0 40px 0 rgba(10, 132, 255, 0.15);
    color: #FFF;
    font-size: 16px;
    font-style: normal;
    font-weight: 700;
    line-height: normal;
  }
  
  .faq__group-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  
  .faq__group-icon img {
    display: block;
  }
  
  .container.container--flush.container--narrow {
    padding: 40px 0px !important;
  }
  
 
  
  @media (max-width: 749px) {
    h1.faq__group-title.heading.h2 {
      padding: 20px 12px;
      font-size: 14px;
    }
  }
  

/* FIX FOR ARROW POSITIONING */
.faq__question {
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  width: 100% !important;
  padding: 0 !important;
  margin: 0 !important;
}

/* Text container - this is KEY */
.faq__question-text {
  flex: 1 !important;
  min-width: 0 !important; /* Allows text to truncate */
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: normal !important; /* Allows wrapping */
  padding-right: 20px !important; /* Space between text and arrow */
  text-align: left !important;
}

/* Arrow container */
.faq__arrow-icon {
  flex-shrink: 0 !important;
  width: 24px !important;
  height: 24px !important;
  min-width: 24px !important; /* Prevents shrinking */
  margin-left: auto !important; /* Pushes to far right */
}

/* Arrow icon */
.arrow-icon {
  width: 100% !important;
  height: 100% !important;
  color: #FFFFFF !important;
  transition: transform 0.3s ease !important;
}

/* Arrow points DOWN when closed */
.faq__question[aria-expanded="false"] .arrow-icon {
  transform: rotate(0deg) !important;
}

/* Arrow points UP when open */
.faq__question[aria-expanded="true"] .arrow-icon {
  transform: rotate(180deg) !important;
}

/* Ensure the button container is full width */
.faq__item-wrapper {
  width: 100% !important;
}

/* Mobile responsive */
@media (max-width: 749px) {
  .faq__arrow-icon {
    width: 20px !important;
    height: 20px !important;
    min-width: 20px !important;
  }
  
  .faq__question-text {
    padding-right: 16px !important;
  }
}
</style>

{% schema %}
{
  "name": "FAQ",
  "settings": [
    {
      "type": "text",
      "id": "label",
      "label": "Section Label",
      "default": "KNOWLEDGE CENTER"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Knowledge Center"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Everything you need to know about Pro Spectrum"
    },
    {
      "type": "checkbox",
      "id": "show_contact_info",
      "label": "Show additional info",
      "info": "Additional info is displayed below all questions.",
      "default": true
    },
    {
      "type": "text",
      "id": "contact_info_heading",
      "label": "Heading",
      "default": "Any question?"
    },
    {
      "type": "richtext",
      "id": "contact_info_text",
      "label": "Text",
      "default": "<p>If we still haven't answered your question, you can contact us below and we will get back to you as soon as possible.</p>"
    },
    {
      "type": "header",
      "content": "Block 1"
    },
    {
      "type": "select",
      "id": "contact_1_icon",
      "label": "Icon",
      "options": [
        {
          "value": "bi-add-to-cart",
          "label": "Add to cart",
          "group": "Shop"
        },
        {
          "value": "bi-gift-wrap",
          "label": "Gift wrap",
          "group": "Shop"
        },
        {
          "value": "bi-gift-box",
          "label": "Gift box",
          "group": "Shop"
        },
        {
          "value": "bi-heart",
          "label": "Heart",
          "group": "Shop"
        },
        {
          "value": "bi-ecology",
          "label": "Ecology",
          "group": "Shop"
        },
        {
          "value": "bi-plant",
          "label": "Plant",
          "group": "Shop"
        },
        {
          "value": "bi-shop",
          "label": "Shop",
          "group": "Shop"
        },
        {
          "value": "bi-shop-pin",
          "label": "Shop with pin",
          "group": "Shop"
        },
        {
          "value": "bi-alert",
          "label": "Alert",
          "group": "Communication"
        },
        {
          "value": "bi-chat",
          "label": "Chat",
          "group": "Communication"
        },
        {
          "value": "bi-comment",
          "label": "Comment",
          "group": "Communication"
        },
        {
          "value": "bi-customer-support",
          "label": "Customer support",
          "group": "Communication"
        },
        {
          "value": "bi-email",
          "label": "Email",
          "group": "Communication"
        },
        {
          "value": "bi-network",
          "label": "Network",
          "group": "Communication"
        },
        {
          "value": "bi-newsletter",
          "label": "Newsletter",
          "group": "Communication"
        },
        {
          "value": "bi-love",
          "label": "Love",
          "group": "Communication"
        },
        {
          "value": "bi-phone",
          "label": "Phone",
          "group": "Communication"
        },
        {
          "value": "bi-share",
          "label": "Share",
          "group": "Communication"
        },
        {
          "value": "bi-delivery",
          "label": "Delivery",
          "group": "Delivery"
        },
        {
          "value": "bi-fast-delivery",
          "label": "Fast delivery",
          "group": "Delivery"
        },
        {
          "value": "bi-returns",
          "label": "Returns",
          "group": "Delivery"
        },
        {
          "value": "bi-time",
          "label": "Time",
          "group": "Delivery"
        },
        {
          "value": "bi-secure-payment",
          "label": "Secure payment",
          "group": "Security"
        },
        {
          "value": "bi-mobile-payment",
          "label": "Mobile payment",
          "group": "Security"
        },
        {
          "value": "bi-credit-card",
          "label": "Credit card",
          "group": "Security"
        },
        {
          "value": "bi-shield",
          "label": "Shield",
          "group": "Security"
        }
      ],
      "default": "bi-phone"
    },
    {
      "type": "text",
      "id": "contact_1_heading",
      "label": "Heading",
      "default": "Customer support"
    },
    {
      "type": "richtext",
      "id": "contact_1_text",
      "label": "Text",
      "default": "<p>Enter your text here</p>"
    },
    {
      "type": "header",
      "content": "Block 2"
    },
    {
      "type": "select",
      "id": "contact_2_icon",
      "label": "Icon",
      "options": [
        {
          "value": "bi-add-to-cart",
          "label": "Add to cart",
          "group": "Shop"
        },
        {
          "value": "bi-gift-wrap",
          "label": "Gift wrap",
          "group": "Shop"
        },
        {
          "value": "bi-gift-box",
          "label": "Gift box",
          "group": "Shop"
        },
        {
          "value": "bi-heart",
          "label": "Heart",
          "group": "Shop"
        },
        {
          "value": "bi-ecology",
          "label": "Ecology",
          "group": "Shop"
        },
        {
          "value": "bi-plant",
          "label": "Plant",
          "group": "Shop"
        },
        {
          "value": "bi-shop",
          "label": "Shop",
          "group": "Shop"
        },
        {
          "value": "bi-shop-pin",
          "label": "Shop with pin",
          "group": "Shop"
        },
        {
          "value": "bi-alert",
          "label": "Alert",
          "group": "Communication"
        },
        {
          "value": "bi-chat",
          "label": "Chat",
          "group": "Communication"
        },
        {
          "value": "bi-comment",
          "label": "Comment",
          "group": "Communication"
        },
        {
          "value": "bi-customer-support",
          "label": "Customer support",
          "group": "Communication"
        },
        {
          "value": "bi-email",
          "label": "Email",
          "group": "Communication"
        },
        {
          "value": "bi-network",
          "label": "Network",
          "group": "Communication"
        },
        {
          "value": "bi-newsletter",
          "label": "Newsletter",
          "group": "Communication"
        },
        {
          "value": "bi-love",
          "label": "Love",
          "group": "Communication"
        },
        {
          "value": "bi-phone",
          "label": "Phone",
          "group": "Communication"
        },
        {
          "value": "bi-share",
          "label": "Share",
          "group": "Communication"
        },
        {
          "value": "bi-delivery",
          "label": "Delivery",
          "group": "Delivery"
        },
        {
          "value": "bi-fast-delivery",
          "label": "Fast delivery",
          "group": "Delivery"
        },
        {
          "value": "bi-returns",
          "label": "Returns",
          "group": "Delivery"
        },
        {
          "value": "bi-time",
          "label": "Time",
          "group": "Delivery"
        },
        {
          "value": "bi-secure-payment",
          "label": "Secure payment",
          "group": "Security"
        },
        {
          "value": "bi-mobile-payment",
          "label": "Mobile payment",
          "group": "Security"
        },
        {
          "value": "bi-credit-card",
          "label": "Credit card",
          "group": "Security"
        },
        {
          "value": "bi-shield",
          "label": "Shield",
          "group": "Security"
        }
      ],
      "default": "bi-email"
    },
    {
      "type": "text",
      "id": "contact_2_heading",
      "label": "Heading",
      "default": "Send a message"
    },
    {
      "type": "richtext",
      "id": "contact_2_text",
      "label": "Text",
      "default": "<p>Enter your text here</p>"
    }
  ],
  "blocks": [
    {
  "type": "separator",
  "name": "Section separator",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Default"
    },
    {
      "type": "image_picker",
      "id": "icon_image",
      "label": "Icon image",
      "info": "Upload your custom icon"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon color",
      "default": "#FFD700"
    },
    {
      "type": "range",
      "id": "icon_width",
      "label": "Icon width",
      "min": 10,
      "max": 100,
      "step": 2,
      "unit": "px",
      "default": 24
    },
    {
      "type": "range",
      "id": "icon_height",
      "label": "Icon height",
      "min": 10,
      "max": 100,
      "step": 2,
      "unit": "px",
      "default": 24
    },
    {
      "type": "range",
      "id": "icon_margin_top",
      "label": "Icon top margin",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "icon_margin_right",
      "label": "Icon right margin",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "default": 10
    },
    {
      "type": "range",
      "id": "icon_margin_bottom",
      "label": "Icon bottom margin",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "icon_margin_left",
      "label": "Icon left margin",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ]
},
    {
      "type": "question",
      "name": "Question",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Question"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "Answer"
        }
      ]
    }
  ],
  "presets": [
  {
    "category": "Text",
    "name": "Frequently Asked Questions",
    "settings": {},
    "blocks": [
      {
        "type": "separator",
        "settings": {
          "title": "Shipping",
          "icon_width": 24,
          "icon_height": 24
        }
      },
      {
        "type": "question",
        "settings": {
          "title": "Do you ship overseas?",
          "answer": "<p>Yes, we ship all over the world. Shipping costs will apply, and will be added at checkout. We run discounts and promotions all year, so stay tuned for exclusive deals.</p>"
        }
      },
      {
        "type": "separator",
        "settings": {
          "title": "Product"
        }
      },
      {
        "type": "question",
        "settings": {
          "title": "Can I return my product?",
          "answer": "<p>We always aim for make sure our customers love our products, but if you do need to return an order, we're happy to help. Just email us directly and we'll take you through the process.</p>"
        }
      }
    ]
  }
]
}
{% endschema %}